apiVersion: v1
kind: ConfigMap
metadata:
  name: ml-pipeline-config
  namespace: ml-pipeline
  labels:
    app: crypto-prediction-api
    component: config
data:
  # =============================================================================
  # Environment
  # =============================================================================
  ENVIRONMENT: "production"
  DEBUG: "false"

  # =============================================================================
  # Database (PostgreSQL deployed separately)
  # Service: postgresql.ml-pipeline.svc.cluster.local
  # =============================================================================
  DB_HOST: "postgresql.ml-pipeline.svc.cluster.local"
  DB_PORT: "5432"
  DB_NAME: "mlflow"
  DB_USER: "mlflow"
  # DB_PASSWORD is in secrets

  # =============================================================================
  # MinIO (from Helm chart: ml-minio)
  # Service: ml-minio.ml-pipeline.svc.cluster.local
  # =============================================================================
  MINIO_ENDPOINT: "ml-minio.ml-pipeline.svc.cluster.local:9000"
  MINIO_SECURE: "false"
  MINIO_BUCKET_MODELS: "mlflow-artifacts"
  MINIO_BUCKET_FEATURES: "crypto-features"
  MINIO_BUCKET_DATA_VERSIONS: "crypto-data-versions"
  # MINIO_ACCESS_KEY and MINIO_SECRET_KEY are in secrets

  # =============================================================================
  # Redis (from Helm chart: ml-redis)
  # Service: ml-redis-master.ml-pipeline.svc.cluster.local
  # =============================================================================
  REDIS_HOST: "ml-redis-master.ml-pipeline.svc.cluster.local"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  # REDIS_PASSWORD is in secrets

  # =============================================================================
  # MLflow (from Helm chart: ml-mlflow)
  # Service: ml-mlflow.ml-pipeline.svc.cluster.local
  # =============================================================================
  MLFLOW_TRACKING_URI: "http://ml-mlflow.ml-pipeline.svc.cluster.local:5000"
  MLFLOW_EXPERIMENT_PREFIX: "crypto_multi_models"
  MLFLOW_ARTIFACT_ROOT: "s3://mlflow-artifacts"

  # =============================================================================
  # API Configuration
  # =============================================================================
  BINANCE_BASE_URL: "https://api.binance.com/api/v3/klines"
  BINANCE_SYMBOLS: '["BTCUSDT","ETHUSDT","BNBUSDT","ADAUSDT","SOLUSDT"]'
  BINANCE_INTERVAL: "15m"

  # API Server
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  API_WORKERS: "4"
  API_RELOAD: "false"
  API_LOG_LEVEL: "info"
  API_CORS_ORIGINS: '["*"]'
  API_RATE_LIMIT: "100/minute"

  # =============================================================================
  # Monitoring (from Helm chart: ml-monitoring)
  # Service: ml-monitoring-kube-prometh-prometheus.ml-pipeline.svc.cluster.local
  # =============================================================================
  MONITORING_PROMETHEUS_PUSHGATEWAY: "ml-monitoring-kube-prometh-prometheus.ml-pipeline.svc.cluster.local:9090"
  MONITORING_LOG_LEVEL: "INFO"
  MONITORING_ENABLE_METRICS: "true"
  MONITORING_ENABLE_TRACING: "false"
